import{_ as v,a as b}from"./DZeuuCNf.js";import{_ as y}from"./BexCFbYm.js";import{u as C}from"./DCwee4jJ.js";import{_ as m,o as c,c as u,b as f,w,a as o,n as x,t as l,F as g,p as h,q as D}from"./KRDrTB3T.js";const p=C(),P={data(){return{isHiden:!1}},props:["productsData","course"],mounted(){p.initializeStore()},methods:{addToCart(r){p.addCart(r)},getNowInCart(r){var e,i;const s=(e=p.cart)==null?void 0:e.find(t=>t.item.id===r.id);return!!((i=s==null?void 0:s.item)!=null&&i.id)}}},j={class:"card-wrapper"},S={class:"price-card"},N={class:"name-card"},B={class:"evaluation-card"},I={class:"cart-button"},V={key:1,style:{"background-color":"#679cff"}};function J(r,s,e,i,t,a){const d=y;return c(),u("div",j,[f(d,{to:`/product/${e.productsData.id}`},{default:w(()=>[o("div",{class:"pict-card",style:x(`background:linear-gradient(45deg, rgba(0,0,0,0.1) 97%,rgba(0,0,0,0.1) 99%,rgba(0,0,0,0) 100%),url(${e.productsData.image});background-repeat: no-repeat;background-size: contain;background-position: center; `)},null,4),o("div",S,[o("p",null,l(Math.round(e.productsData.price*e.course).toLocaleString("ru-RU"))+" ₽",1)]),o("div",N,[o("p",null,l(e.productsData.title)+" / "+l(e.productsData.category),1)]),o("div",B,[s[1]||(s[1]=o("img",{src:v},null,-1)),o("p",null,l(e.productsData.rating.rate),1)])]),_:1},8,["to"]),o("div",I,[a.getNowInCart(e.productsData)?(c(),u("button",V,"В корзине")):(c(),u("button",{key:0,onClick:s[0]||(s[0]=_=>{a.addToCart(e.productsData),t.isHiden=!0})},"В корзину"))])])}const L=m(P,[["render",J]]),M={data(){return{products_data:null,course:null,url:"https://fakestoreapi.com/products",arr_json:null,count_pages:0,current_page:1}},mounted(){this.getProducts(),this.getCourse()},methods:{getProducts(){fetch(this.url).then(r=>r.json()).then(r=>{let s=JSON.stringify(r),e=JSON.parse(s);this.arr_json=e,this.count_pages=Math.ceil(e.length/10),this.Pagination(e,this.current_page)})},getCourse(){fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(r=>r.json()).then(r=>{this.course=Math.round(r.Valute.USD.Value)})},Pagination(r,s,e=10){const i=(s-1)*e,t=i+e;this.products_data=r.slice(i,t)}}},z={class:"sort-wrapper"},F={class:"sort-cont"},H={class:"button-wrapper"},O={class:"button-wrapper"},T={class:"button-wrapper"},U={class:"button-wrapper"},q={class:"button-wrapper"},A={key:0,class:"load"},E={key:1},R={class:"container"},G={class:"card-container"},K={class:"pag-container"},Q={class:"pagbut-cont"},W=["onClick"];function X(r,s,e,i,t,a){const d=b,_=L;return c(),u("div",null,[f(d),s[6]||(s[6]=o("div",{class:"sort-title"},[o("h2",null,"Категории")],-1)),o("div",z,[o("div",F,[o("div",H,[o("button",{onClick:s[0]||(s[0]=n=>{t.url=="https://fakestoreapi.com/products"||(t.url="https://fakestoreapi.com/products",t.products_data=null,a.getProducts())})},"Все")]),o("div",O,[o("button",{onClick:s[1]||(s[1]=n=>{t.url=="https://fakestoreapi.com/products/category/electronics"||(t.url="https://fakestoreapi.com/products/category/electronics",t.products_data=null,a.getProducts())})},"Электроника")]),o("div",T,[o("button",{onClick:s[2]||(s[2]=n=>{t.url=="https://fakestoreapi.com/products/category/jewelery"||(t.url="https://fakestoreapi.com/products/category/jewelery",t.products_data=null,a.getProducts())})},"Ювелирные изделия")]),o("div",U,[o("button",{onClick:s[3]||(s[3]=n=>{t.url=="https://fakestoreapi.com/products/category/men's clothing"||(t.url="https://fakestoreapi.com/products/category/men's clothing",t.products_data=null,a.getProducts())})},"Мужская одежда")]),o("div",q,[o("button",{onClick:s[4]||(s[4]=n=>{t.url=="https://fakestoreapi.com/products/category/women's clothing"||(t.url="https://fakestoreapi.com/products/category/women's clothing",t.products_data=null,a.getProducts())})},"Женская одежда")])])]),!t.products_data||!t.course?(c(),u("div",A,s[5]||(s[5]=[o("p",null,"Загрузка...",-1)]))):(c(),u("div",E,[o("div",R,[o("div",G,[(c(!0),u(g,null,h(t.products_data,(n,k)=>(c(),D(_,{"products-data":n,course:t.course,key:n.id},null,8,["products-data","course"]))),128))])]),o("div",K,[(c(!0),u(g,null,h(t.count_pages,n=>(c(),u("div",Q,[o("button",{onClick:k=>{t.current_page=n,a.Pagination(t.arr_json,t.current_page),console.log(t.current_page)}},l(n),9,W)]))),256))])]))])}const ot=m(M,[["render",X]]);export{ot as default};
